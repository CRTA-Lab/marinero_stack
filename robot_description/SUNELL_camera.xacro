<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="camera">

    <joint name="camera_base_joint" type="revolute">
        <origin xyz="0.0 0.0 0.5415" rpy="0.0 0.0 0.0" />
        <parent link="chassis" />
        <child link="camera_base" />
        <axis xyz="0 0 1" />
        <limit
            upper="${pi}"
            lower="-${pi}"
            effort="100"
            velocity="100" />
        <dynamics damping="10.0" friction="5.0" />
    </joint>

    <link name="camera_base">
        <visual>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <geometry>
                <mesh filename="package://marinero_simulations/robot_description/meshes/SUNELL_camera_base.dae" scale="1.0 1.0 1.0"/>
            </geometry>
        </visual>

        <collision>
            <origin xyz="0.0 0.002 0.0615"/>
            <geometry>
                <box size="0.112 0.125 0.124"/>
            </geometry>
        </collision>
        
        <inertial>
            <origin xyz="-0.00136 0.003545 0.06308" rpy="0 0 0"/>
            <mass value="1.65" />
            <inertia ixx="0.00636" ixy="0.0" ixz="0.0"
                    iyx="0.0" iyy="0.00485" iyz="0.0"
                    izx="0.0" izy="0.0" izz="0.0049" />
        </inertial>
    </link>


    <!-- RIGHT CAMERA -->

    <joint name="right_camera_joint" type="revolute">
        <origin xyz="0.0 -0.0605 0.093" rpy="0.0 0.0 ${pi/2}" />
        <parent link="camera_base" />
        <child link="right_camera_link" />
        <axis xyz="1 0 0" />
        <limit
            upper="2.0"
            lower="1.0"
            effort="100"
            velocity="100" />
        <dynamics damping="10.0" friction="10.0" />
    </joint>

    <link name="right_camera_link">
        <visual>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0 0.0"/>
            <geometry>
                <mesh filename="package://marinero_simulations/robot_description/meshes/SUNELL_right_camera.dae" scale="1.0 1.0 1.0"/>
            </geometry>
        </visual>

        <collision>
            <origin xyz="-0.052 -0.0125 0.0" rpy="0.0 0 0.0"/>
            <geometry>
                <box size="0.095 0.1 0.18"/>
            </geometry>
        </collision>

        <inertial>
            <origin xyz="-0.05144 -0.01752 0.0129" rpy="0.0 0 0.0"/>
            <mass value="1.65" />
            <inertia ixx="0.00438" ixy="0.0" ixz="0.0"
                    iyx="0.0" iyy="0.00423" iyz="0.0"
                    izx="0.0" izy="0.0" izz="0.00199" />
        </inertial>
    </link>

    <joint name="right_camera_center" type="fixed">
        <origin xyz="-0.052 -0.0195 0.0885" rpy="0.0 ${-pi/2} ${-pi/2}"/>
        <parent link="right_camera_link"/>
        <child link="right_camera_center_link"/>
    </joint>

    <link name="right_camera_center_link"></link>

    <joint name="right_camera_depth_joint" type="fixed">
        <origin xyz="0.0 0.0 0.0" rpy="${-pi/2} 0 ${-pi/2}"/>
        <parent link="right_camera_center_link"/>
        <child link="right_camera_depth_frame"/>
    </joint>

    <link name="right_camera_depth_frame"></link>


    <!-- LEFT CAMERA -->

    <joint name="left_camera_joint" type="revolute">
        <origin xyz="0.0 0.0645 0.093" rpy="0.0 0.0 ${pi/2}" />
        <parent link="camera_base" />
        <child link="left_camera_link" />
        <axis xyz="1 0 0" />
        <limit
            upper="2.0"
            lower="1.0"
            effort="100"
            velocity="100" />
        <dynamics damping="10.0" friction="5.0" />
    </joint>

    <link name="left_camera_link">
        <visual>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0 0.0"/>
            <geometry>
                <mesh filename="package://marinero_simulations/robot_description/meshes/SUNELL_left_camera.dae" scale="1.0 1.0 1.0"/>
            </geometry>
        </visual>

        <collision>
            <origin xyz="0.052 -0.0125 0.0" rpy="0.0 0 0.0"/>
            <geometry>
                <box size="0.095 0.1 0.18"/>
            </geometry>
        </collision>

        <inertial>
            <origin xyz="0.05252 -0.01726 -0.01762" rpy="0.0 0 0.0"/>
            <mass value="1.65" />
            <inertia ixx="0.0052" ixy="0.0" ixz="0.0"
                    iyx="0.0" iyy="0.0051" iyz="0.0"
                    izx="0.0" izy="0.0" izz="0.0024" />
        </inertial>
    </link>

    <joint name="left_camera_center" type="fixed">
        <origin xyz="0.056 -0.0215 0.0895" rpy="0.0 ${-pi/2} ${-pi/2}"/>
        <parent link="left_camera_link"/>
        <child link="left_camera_center_link"/>
    </joint>

    <link name="left_camera_center_link"></link>

    <joint name="left_camera_depth_joint" type="fixed">
        <origin xyz="0.0 0.0 0.0" rpy="${-pi/2} 0.0 ${-pi/2}"/>   
        <parent link="left_camera_center_link"/>
        <child link="left_camera_depth_frame"/>
    </joint>

    <link name="left_camera_depth_frame"></link>


    <!-- GAZEBO PLUGINS -->

    <gazebo reference="right_camera_center_link">
        <sensor name="right_depth_camera" type="depth">
            <update_rate>20</update_rate>
            <visualize>false</visualize>
            <camera name="right_dep_cam">
                <horizontal_fov>1.3962634</horizontal_fov>
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>B8G8R8</format>
                </image>
                <clip>
                    <near>0.05</near>
                    <far>20</far>
                </clip>
            </camera>
            <plugin name="right_camera_controller" filename="libgazebo_ros_camera.so">
                <frame_name>right_camera_depth_frame</frame_name>
                <update_rate>20</update_rate>
                <min_depth>0.05</min_depth>
                <max_depth>20</max_depth>
            </plugin>
        </sensor>
    </gazebo>

    <!-- <gazebo reference="left_camera_center_link">
        <sensor name="left_depth_camera" type="depth">
            <update_rate>20</update_rate>
            <visualize>false</visualize>
            <camera name="left_dep_cam">
                <horizontal_fov>1.3962634</horizontal_fov>
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>B8G8R8</format>
                </image>
                <clip>
                    <near>0.1</near>
                    <far>25</far>
                </clip>
            </camera>
            <plugin name="left_camera_controller" filename="libgazebo_ros_camera.so">
                <frame_name>left_camera_depth_frame</frame_name>
                <imageTopicName>camera/image_left</imageTopicName>
                <depthImageTopicName>camera/depth_image_left</depthImageTopicName>
                <min_depth>0.1</min_depth>
                <max_depth>25</max_depth>
            </plugin>
        </sensor>
    </gazebo> -->

</robot>
